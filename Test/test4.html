<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant POS System</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #10b981;
            --dark-bg: #1f2937;
            --card-bg: #374151;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .login-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            padding: 40px;
            max-width: 450px;
            width: 100%;
        }

        .navbar-custom {
            background: var(--dark-bg) !important;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .sidebar {
            background: var(--dark-bg);
            min-height: calc(100vh - 56px);
            padding: 20px 0;
        }

        .sidebar .nav-link {
            color: #9ca3af;
            padding: 12px 20px;
            margin: 5px 15px;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .sidebar .nav-link:hover, .sidebar .nav-link.active {
            background: var(--primary-color);
            color: white;
        }

        .card-custom {
            border: none;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .card-custom:hover {
            transform: translateY(-5px);
        }

        .btn-primary-custom {
            background: var(--primary-color);
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            transition: all 0.3s;
        }

        .btn-primary-custom:hover {
            background: #059669;
            transform: scale(1.05);
        }

        .table-custom {
            background: white;
            border-radius: 12px;
            overflow: hidden;
        }

        .item-card {
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .item-card:hover {
            border-color: var(--primary-color);
        }

        .item-card img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 8px 8px 0 0;
        }

        .order-item {
            background: white;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    </style>
</head>
<body>

<!-- LOGIN PAGE -->
<div id="login-page">
    <div class="login-container">
        <div class="login-card">
            <div class="text-center mb-4">
                <i class="fas fa-utensils fa-3x text-primary mb-3"></i>
                <h2>Restaurant POS</h2>
                <p class="text-muted">Sign in to continue</p>
            </div>
            <form id="login-form">
                <div class="mb-3">
                    <label class="form-label">Username</label>
                    <input type="text" class="form-control" id="login-username" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-control" id="login-password" required>
                </div>
                <button type="submit" class="btn btn-primary-custom w-100">Login</button>
            </form>
            <div class="alert alert-info mt-3">
                <small><strong>Demo:</strong> admin / admin123</small>
            </div>
        </div>
    </div>
</div>

<!-- MAIN APP -->
<div id="app" style="display:none;">
    <nav class="navbar navbar-dark navbar-custom">
        <div class="container-fluid">
            <span class="navbar-brand"><i class="fas fa-utensils"></i> Restaurant POS</span>
            <div class="d-flex align-items-center">
                <span class="text-white me-3">Welcome, <span id="current-user"></span></span>
                <button class="btn btn-outline-light btn-sm" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</button>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- SIDEBAR -->
            <div class="col-md-2 p-0 sidebar">
                <ul class="nav flex-column">
                    <li class="nav-item"><a class="nav-link active" href="#" data-page="dashboard"><i class="fas fa-home me-2"></i> Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-page="items"><i class="fas fa-pizza-slice me-2"></i> Items</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-page="orders"><i class="fas fa-shopping-cart me-2"></i> Orders</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-page="history"><i class="fas fa-history me-2"></i> History</a></li>
                </ul>
            </div>

            <!-- MAIN CONTENT -->
            <div class="col-md-10 p-4">
                <!-- DASHBOARD -->
                <div id="dashboard-page" class="page-content">
                    <h2>Dashboard</h2>
                    <div class="row mt-4">
                        <div class="col-md-3 mb-3">
                            <div class="card-custom card p-4 text-center bg-primary text-white">
                                <i class="fas fa-pizza-slice fa-2x mb-2"></i>
                                <h4 id="total-items">0</h4><p>Items</p>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card-custom card p-4 text-center bg-warning text-white">
                                <i class="fas fa-shopping-cart fa-2x mb-2"></i>
                                <h4 id="total-orders">0</h4><p>Orders</p>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card-custom card p-4 text-center bg-success text-white">
                                <i class="fas fa-dollar-sign fa-2x mb-2"></i>
                                <h4 id="total-revenue">$0</h4><p>Revenue</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ITEMS -->
                <div id="items-page" class="page-content" style="display:none;">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h3>Manage Items</h3>
                        <button class="btn btn-primary-custom" data-bs-toggle="modal" data-bs-target="#itemModal" onclick="resetItemForm()">Add Item</button>
                    </div>
                    <div class="table-custom">
                        <table class="table table-hover">
                            <thead class="table-light"><tr><th>ID</th><th>Name</th><th>Category</th><th>Price</th><th>Qty</th><th>Actions</th></tr></thead>
                            <tbody id="items-table-body"></tbody>
                        </table>
                    </div>
                </div>

                <!-- ORDERS -->
                <div id="orders-page" class="page-content" style="display:none;">
                    <h3>Place Order</h3>
                    <div class="row mt-3">
                        <div class="col-md-8">
                            <div class="row" id="order-items-grid"></div>
                        </div>
                        <div class="col-md-4">
                            <div class="card p-3 card-custom">
                                <h5>Order Summary</h5>
                                <div id="order-summary"></div>
                                <hr>
                                <div class="d-flex justify-content-between">
                                    <strong>Total:</strong> <span id="order-total">$0.00</span>
                                </div>
                                <button class="btn btn-primary-custom w-100 mt-3" onclick="placeOrder()">Place Order</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- HISTORY -->
                <div id="history-page" class="page-content" style="display:none;">
                    <h3>Order History</h3>
                    <table class="table table-hover table-custom mt-3">
                        <thead class="table-light"><tr><th>ID</th><th>Date</th><th>Items</th><th>Total</th></tr></thead>
                        <tbody id="history-table-body"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ITEM MODAL -->
<div class="modal fade" id="itemModal" tabindex="-1">
    <div class="modal-dialog"><div class="modal-content">
        <div class="modal-header"><h5 class="modal-title">Add Item</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
        <div class="modal-body">
            <form id="item-form">
                <input type="hidden" id="item-id">
                <div class="mb-2"><label>Name</label><input type="text" id="item-name" class="form-control" required></div>
                <div class="mb-2"><label>Category</label><input type="text" id="item-category" class="form-control" required></div>
                <div class="mb-2"><label>Price ($)</label><input type="number" id="item-price" step="0.01" min="0" class="form-control" required></div>
                <div class="mb-2"><label>Quantity</label><input type="number" id="item-quantity" min="1" class="form-control" required></div>
                <button class="btn btn-primary-custom w-100 mt-2">Save</button>
            </form>
        </div>
    </div></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script>
    let users=[{username:'admin',password:'admin123'}];
    let items=[
        {id:1,name:'Pepperoni Pizza',category:'Pizza',price:12.99,quantity:10},
        {id:2,name:'Cheese Burger',category:'Burger',price:8.99,quantity:20},
        {id:3,name:'Iced Coffee',category:'Beverage',price:4.99,quantity:30}
    ];
    let orders=[];
    let cart=[];
    let currentUser=null;

    document.getElementById('login-form').addEventListener('submit',e=>{
        e.preventDefault();
        const u=document.getElementById('login-username').value;
        const p=document.getElementById('login-password').value;
        const user=users.find(x=>x.username===u&&x.password===p);
        if(user){
            currentUser=u;
            document.getElementById('current-user').textContent=u;
            document.getElementById('login-page').style.display='none';
            document.getElementById('app').style.display='block';
            loadDashboard();
        }else alert('Invalid credentials!');
    });

    document.getElementById('logout-btn').onclick=()=>{
        currentUser=null;
        document.getElementById('app').style.display='none';
        document.getElementById('login-page').style.display='block';
        document.getElementById('login-form').reset();
    };

    document.querySelectorAll('.sidebar .nav-link').forEach(link=>{
        link.onclick=e=>{
            e.preventDefault();
            document.querySelectorAll('.sidebar .nav-link').forEach(l=>l.classList.remove('active'));
            link.classList.add('active');
            const page=link.dataset.page;
            document.querySelectorAll('.page-content').forEach(p=>p.style.display='none');
            document.getElementById(page+'-page').style.display='block';
            if(page==='dashboard')loadDashboard();
            if(page==='items')loadItems();
            if(page==='orders')loadOrderPage();
            if(page==='history')loadOrderHistory();
        };
    });

    function loadDashboard(){
        document.getElementById('total-items').textContent=items.length;
        document.getElementById('total-orders').textContent=orders.length;
        const total=orders.reduce((s,o)=>s+o.total,0);
        document.getElementById('total-revenue').textContent='$'+total.toFixed(2);
    }

    function loadItems(){
        const tbody=document.getElementById('items-table-body');
        tbody.innerHTML='';
        items.forEach(i=>{
            tbody.innerHTML+=`
      <tr><td>${i.id}</td><td>${i.name}</td><td>${i.category}</td>
      <td>$${i.price.toFixed(2)}</td><td>${i.quantity}</td>
      <td><button class='btn btn-sm btn-warning' onclick='editItem(${i.id})'><i class='fas fa-edit'></i></button>
      <button class='btn btn-sm btn-danger' onclick='deleteItem(${i.id})'><i class='fas fa-trash'></i></button></td></tr>`;
        });
    }

    function resetItemForm(){
        document.getElementById('item-form').reset();
        document.getElementById('item-id').value='';
    }

    document.getElementById('item-form').addEventListener('submit',e=>{
        e.preventDefault();
        const id=document.getElementById('item-id').value;
        const item={
            id:id?parseInt(id):items.length?Math.max(...items.map(i=>i.id))+1:1,
            name:document.getElementById('item-name').value,
            category:document.getElementById('item-category').value,
            price:parseFloat(document.getElementById('item-price').value),
            quantity:parseInt(document.getElementById('item-quantity').value)
        };
        if(id){const idx=items.findIndex(x=>x.id==id);items[idx]=item;}
        else items.push(item);
        bootstrap.Modal.getInstance(document.getElementById('itemModal')).hide();
        loadItems();
    });

    function editItem(id){
        const i=items.find(x=>x.id===id);
        document.getElementById('item-id').value=i.id;
        document.getElementById('item-name').value=i.name;
        document.getElementById('item-category').value=i.category;
        document.getElementById('item-price').value=i.price;
        document.getElementById('item-quantity').value=i.quantity;
        new bootstrap.Modal(document.getElementById('itemModal')).show();
    }

    function deleteItem(id){
        if(confirm('Delete item?')){items=items.filter(i=>i.id!==id);loadItems();}
    }

    function loadOrderPage(){
        const grid=document.getElementById('order-items-grid');
        grid.innerHTML='';
        items.filter(i=>i.quantity>0).forEach(i=>{
            grid.innerHTML+=`
    <div class='col-md-4 mb-3'>
      <div class='card item-card' onclick='addToCart(${i.id})'>
        <img src='https://picsum.photos/200?random=${i.id}'><div class='p-2'>
          <h6>${i.name}</h6><p>$${i.price.toFixed(2)}</p>
        </div>
      </div>
    </div>`;
        });
        renderCart();
    }

    function addToCart(id){
        const item=items.find(i=>i.id===id);
        const existing=cart.find(c=>c.id===id);
        if(existing){if(existing.qty<item.quantity)existing.qty++;}
        else cart.push({...item,qty:1});
        renderCart();
    }

    function renderCart(){
        const div=document.getElementById('order-summary');
        div.innerHTML='';
        let total=0;
        cart.forEach(c=>{
            total+=c.price*c.qty;
            div.innerHTML+=`
    <div class='order-item'>
      <span>${c.name} x${c.qty}</span>
      <span>$${(c.price*c.qty).toFixed(2)}</span>
    </div>`;
        });
        document.getElementById('order-total').textContent='$'+total.toFixed(2);
    }

    function placeOrder(){
        if(cart.length===0){alert('No items selected!');return;}
        const total=cart.reduce((s,c)=>s+c.price*c.qty,0);
        orders.push({id:orders.length+1,date:new Date().toLocaleString(),items:[...cart],total});
        cart.forEach(c=>{
            const i=items.find(x=>x.id===c.id);
            i.quantity-=c.qty;
        });
        cart=[];
        renderCart();
        alert('Order placed successfully!');
        loadDashboard();
    }

    function loadOrderHistory(){
        const tbody=document.getElementById('history-table-body');
        tbody.innerHTML='';
        orders.forEach(o=>{
            tbody.innerHTML+=`<tr><td>${o.id}</td><td>${o.date}</td><td>${o.items.length}</td><td>$${o.total.toFixed(2)}</td></tr>`;
        });
    }
</script>
</body>
</html>
